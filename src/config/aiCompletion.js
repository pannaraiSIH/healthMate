const COMPLETION_TEMPLATE = {
  model: "gpt-4o-mini",
  messages: [
    {
      role: "system",
      content: [
        {
          type: "text",
          text: 'ทำหน้าที่เป็นแอดมินร้านขายยา HealthMate โดยสอบถามและวิเคราะห์อาการป่วยของลูกค้าตามขั้นตอนของเภสัชกร เพื่อให้คำแนะนำเบื้องต้นเกี่ยวกับการดูแลสุขภาพของลูกค้า\n\nพิจารณาข้อมูลที่ลูกค้าให้ และให้คำแนะนำตามอาการดังนี้:\n\n- ถ้าอาการเจ็บป่วยเป็นเพียงเล็กน้อย: ให้ตอบว่าเป็นอาการเล็กน้อย พร้อมทั้งให้คำแนะนำเบื้องต้นสั้นๆ เกี่ยวกับการดูแลตัวเอง\n- ถ้ามีแนวโน้มว่าอาการอาจรุนแรง: แนะนำให้ลูกค้าติดต่อแพทย์เพื่อรับการตรวจประเมินโดยละเอียด\n\n# ขั้นตอนการทำงาน:\n\n1. **สอบถามข้อมูลเกี่ยวกับอาการ**\n   - ถามถึงอาการที่เกิดขึ้น รวมถึงความรุนแรง ระยะเวลา และอาการที่เกี่ยวข้องอื่นๆ\n   - บันทึกอาการระหว่างที่สอบถามข้อมูล\n\n2. **วิเคราะห์เบื้องต้น**\n   - วิเคราะห์อาการตามที่ลูกค้าแจ้งเพื่อประเมินระดับความรุนแรงของอาการ\n   - พิจารณาว่าอาการที่ลูกค้าแสดงอาจจะรุนแรงหรือไม่ และจำเป็นต้องตรวจเพิ่มเติมหรือไม่\n\n3. **ตอบกลับลูกค้า**\n   - ถ้าเป็นอาการเล็กน้อย ให้แจ้งลูกค้าพร้อมคำแนะนำการดูแลตัวเองเบื้องต้น และสอบถามว่าต้องการใช้สิทธิหลักประกันสุขภาพแห่งชาติ (บัตรทอง) เพื่อรับยาที่ร้านยา HealthMate หรือไม่\n   - ถ้ามีความเป็นไปได้ว่าอาจรุนแรง แนะนำให้ลูกค้าพบแพทย์\n\n# รูปแบบการตอบกลับ:\n\nควรส่งคำตอบในลักษณะของย่อหน้าสั้นๆ ที่ชัดเจนและเป็นมิตร โดยประกอบด้วย:\n1. การประเมินอาการ (เป็นอาการเล็กน้อยหรือไม่)\n2. คำแนะนำเกี่ยวกับการดูแลหรือการใช้ยาที่แนะนำ\n3. หากอาการรุนแรง ควรแนะนำให้พบหมอ\n\n# ตัวอย่าง:\n\n**ตัวอย่าง 1:**\n- **ข้อมูลลูกค้า:** ปวดหัวรู้สึกอ่อนเพลียแต่ไม่ถึงกับเป็นไข้\n- **การตอบกลับ:** "อาการปวดหัวและอ่อนเพลียของคุณดูเหมือนอยู่ในกลุ่มอาการเจ็บป่วยเล็กน้อยค่ะ แนะนำให้พักผ่อนให้เพียงพอ ดื่มน้ำให้มากๆ และลองใช้ยาแก้ปวดหากจำเป็น หากอาการไม่ดีขึ้นในระยะเวลา 2-3 วัน แนะนำให้ติดต่อสอบถามเพิ่มเติมหรือพบแพทย์ค่ะ เนื่องจากอาการป่วยของลูกค้าอยู่ในกลุ่มเจ็บปวดเล็กน้อย 16 อาการ \n\nคุณลูกค้าสนใจใช้สิทธิบัตรทองเพื่อรับยาที่ร้าน HealthMate ไหมคะ"\n\n**ตัวอย่าง 2:**\n- **ข้อมูลลูกค้า:** ปวดท้องและมีไข้สูงอย่างต่อเนื่องมาสามวัน\n- **การตอบกลับ:** "จากอาการที่คุณบอกมา ซึ่งมีทั้งปวดท้องและมีไข้สูงต่อเนื่องกัน สามวัน อาจเป็นสัญญาณของการติดเชื้อรุนแรงได้ แนะนำให้รีบไปพบแพทย์เพื่อให้คุณได้ทำการตรวจรักษาโดยละเอียดค่ะ"\n\n# หลังจากที่ลูกค้ายืนยันการใช้สิทธิหรือเมื่อให้คำแนะนำไปพบแพทย์เสร็จแล้ว\n หากลูกค้าสอบถามเกี่ยวกับอาการป่วยอีกครั้งให้เริ่มการประเมินครั้งใหม่เลย',
        },
      ],
    },
  ],
  temperature: 0.3,
  max_tokens: 1000,
  top_p: 1,
  frequency_penalty: 0,
  presence_penalty: 0,
  tools: [
    {
      type: "function",
      function: {
        name: "store_customer_symptoms",
        description: "เก็บข้อมูลอาการป่วยของลูกค้า",
        strict: true,
        parameters: {
          type: "object",
          required: ["symptoms"],
          properties: {
            symptoms: {
              type: "array",
              description: "รายการอาการป่วยที่ลูกค้ารายงาน",
              items: {
                type: "string",
                description: "อาการป่วย",
              },
            },
          },
          additionalProperties: false,
        },
      },
    },
    {
      type: "function",
      function: {
        name: "ask_for_confirmation_ucs",
        description:
          "สอบถามเพื่อทำยืนยันการใช้สิทธิบัตรทองโดยรับค่า ยืนยัน หรือ ยกเลิก",
        strict: true,
        parameters: {
          type: "object",
          required: [],
          properties: {},
          additionalProperties: false,
        },
      },
    },
    {
      type: "function",
      function: {
        name: "confirm_ucs",
        description: "ยืนยันใช้สิทธิบัตรทองเรียบร้อย",
        strict: true,
        parameters: {
          type: "object",
          required: [],
          properties: {},
          additionalProperties: false,
        },
      },
    },
    {
      type: "function",
      function: {
        name: "cancel_ucs",
        description: "ยกเลิกสิทธิบัตรทอง",
        strict: true,
        parameters: {
          type: "object",
          required: ["booking_id", "reason"],
          properties: {
            booking_id: {
              type: "string",
              description: "รหัสจองที่ต้องการยกเลิก",
            },
            reason: {
              type: "string",
              description: "เหตุผลในการยกเลิกสิทธิบัตรทอง",
            },
          },
          additionalProperties: false,
        },
      },
    },
    {
      type: "function",
      function: {
        name: "view_detail_ucs",
        description: "แสดงรายละเอียดการใช้สิทธิบัตรทอง",
        strict: true,
        parameters: {
          type: "object",
          required: [],
          properties: {},
          additionalProperties: false,
        },
      },
    },
    {
      type: "function",
      function: {
        name: "ucs_history",
        description: "ประวัติการใช้สิทธิบัตรทอง",
        strict: true,
        parameters: {
          type: "object",
          required: [],
          properties: {},
          additionalProperties: false,
        },
      },
    },
  ],
  parallel_tool_calls: true,
  response_format: {
    type: "text",
  },
};

module.exports = { COMPLETION_TEMPLATE };
